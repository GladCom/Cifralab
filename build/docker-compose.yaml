services:
    cifralabs.students.api:
        ports:
            - '80:80'
        environment:
            - 'ASPNETCORE_URLS=http://+'
            - TZ=Europe/Moscow
            - DBServer=postgres
            - DBPort=5432
            - DBName=cifralabs_studentDB
            - DBLogin=cifralabs_studentDB_Service
            - 'DBPassword=P@ssw0rd!'
            - ASPNETCORE_ENVIRONMENT=Development
        container_name: students.api
        image: cifralabs.students.api:latest
        restart: unless-stopped
        
    cifralabs.students.front:
        ports:
            - '2056:3000'
        container_name: cifralabs.students.front
        image: cifralabs.students.front:latest
        restart: unless-stopped

    postgres:
        image: postgres:latest
        environment:
            POSTGRES_DB: "cifralabs_studentDB"
            POSTGRES_USER: "cifralabs_studentDB_Service"
            POSTGRES_PASSWORD: "P@ssw0rd!"
            PGDATA: /data/postgres
        ports:
            - "5432:5432"
        volumes:
            - ./pgdata:/data/postgres
        restart: unless-stopped
        container_name: postgres